<div class="payment-mock" [class.processing]="state === 'processing'">
  @switch (state) {
    @case ('success') {
      <div class="payment-result success">
        <div class="result-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
        </div>
        <h3>Payment Successful</h3>
        <p>Your consultation has been paid for.</p>
        <button class="btn-primary" (click)="reset()">Done</button>
      </div>
    }
    @case ('error') {
      <div class="payment-result error">
        <div class="result-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="15" y1="9" x2="9" y2="15"/>
            <line x1="9" y1="9" x2="15" y2="15"/>
          </svg>
        </div>
        <h3>Payment Failed</h3>
        <p>{{ errorMessage }}</p>
        <button class="btn-primary" (click)="reset()">Try Again</button>
      </div>
    }
    @default {
      <div class="card-form">
        <div class="card-preview">
          <div class="card-chip"></div>
          <div class="card-number-display">{{ formattedCardNumber || '•••• •••• •••• ••••' }}</div>
          <div class="card-details-row">
            <span class="card-expiry-display">{{ cardExpiry || 'MM/YY' }}</span>
            <span class="card-brand">VISA</span>
          </div>
        </div>

        <div class="form-group">
          <label for="card-number">Card Number</label>
          <input
            id="card-number"
            type="text"
            inputmode="numeric"
            placeholder="1234 5678 9012 3456"
            [value]="formattedCardNumber"
            (input)="onCardNumberInput($event)"
            [disabled]="state === 'processing'"
          />
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="card-expiry">Expiry</label>
            <input
              id="card-expiry"
              type="text"
              inputmode="numeric"
              placeholder="MM/YY"
              [value]="cardExpiry"
              (input)="onExpiryInput($event)"
              [disabled]="state === 'processing'"
            />
          </div>
          <div class="form-group">
            <label for="card-cvc">CVC</label>
            <input
              id="card-cvc"
              type="text"
              inputmode="numeric"
              placeholder="123"
              [value]="cardCvc"
              (input)="onCvcInput($event)"
              [disabled]="state === 'processing'"
            />
          </div>
        </div>

        <button
          class="btn-pay"
          [disabled]="!isFormValid || state === 'processing'"
          (click)="submitPayment()"
        >
          @if (state === 'processing') {
            <span class="spinner"></span>
            Processing...
          } @else {
            Pay Now
          }
        </button>

        <p class="mock-notice">This is a mock payment for demo purposes only.</p>
      </div>
    }
  }
</div>
