<section class="hhi-provider-page specialist-dashboard">
  <div class="hhi-provider-container">
    <!-- Page Header -->
    <header class="hhi-page-header">
      <h1 class="hhi-page-title">Specialist Dashboard</h1>
      <p class="hhi-page-subtitle">Overview of referrals, appointments, and consultations.</p>
    </header>

    <!-- Stats Grid - 2x2 -->
    <div class="stats-grid">
      <div class="stat-card">
        <span class="stat-value">{{ stats.pending }}</span>
        <span class="stat-label">Pending Referrals</span>
        <div class="stat-icon stat-icon--referrals">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
            <polyline points="22,6 12,13 2,6"></polyline>
          </svg>
        </div>
      </div>
      <div class="stat-card">
        <span class="stat-value">{{ stats.appointments }}</span>
        <span class="stat-label">Today's Appointments</span>
        <div class="stat-icon stat-icon--appointments">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
        </div>
      </div>
      <div class="stat-card">
        <span class="stat-value">{{ stats.active }}</span>
        <span class="stat-label">Active Consultations</span>
        <div class="stat-icon stat-icon--consultations">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <path
              d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
            </path>
          </svg>
        </div>
      </div>
      <div class="stat-card">
        <span class="stat-value">{{ stats.patients }}</span>
        <span class="stat-label">Patients This Month</span>
        <div class="stat-icon stat-icon--patients">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </div>
      </div>
    </div>

    <!-- Tab Filters -->
    <div class="tabs-scroll-container" style="position: relative;">
      <div class="tab-filters">
        <button class="tab-filter tab-filter--active">
          All <span class="tab-count-badge">{{ allCount }}</span>
        </button>
        <button class="tab-filter">
          GP Referrals <span class="tab-count-badge">{{ gpCount }}</span>
        </button>
        <button class="tab-filter">
          Specialist Referrals <span class="tab-count-badge">{{ specialistCount }}</span>
        </button>
      </div>
    </div>

    <!-- Referrals Section -->
    <section class="referrals-section">
      <h2 class="section-title">New Referrals</h2>

      <div class="referral-card" *ngFor="let referral of referrals"
        [class]="'referral-card referral-card--' + referral.urgency">
        <div class="referral-card__header">
          <div class="referral-card__avatar">
            {{ referral.patient_name ? (referral.patient_name | slice:0:1) : 'P' }}
          </div>
          <div class="referral-card__info">
            <div class="referral-badges">
              <span class="hhi-badge hhi-badge--neutral">{{ referral.status | uppercase }}</span>
              <span class="hhi-badge" [ngClass]="{
                'hhi-badge--warning': referral.urgency === 'pending' || referral.urgency === 'routine',
                'hhi-badge--urgent': referral.urgency === 'urgent'
              }">{{ referral.urgency | titlecase }}</span>
            </div>
            <h3 class="patient-name">{{ referral.patient_name || 'Patient' }}</h3>
            <p class="referral-meta">
              Referred {{ referral.created_at | date:'short' }}
              &bull; 2 hours ago
            </p>
          </div>
        </div>
        <div class="referral-card__body">
          <p class="clinical-summary">{{ referral.reason || 'Specialist consultation requested.' }}</p>
        </div>
        <div class="referral-card__actions">
          <button class="btn btn--primary" (click)="viewReferral(referral.id)">View</button>
          <button class="btn btn--secondary" (click)="acceptReferral(referral.id)">Accept</button>
        </div>
      </div>

      <!-- Empty State -->
      <div class="hhi-empty-state" *ngIf="referrals.length === 0">
        <svg class="hhi-empty-state__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
          stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
          <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
        <h3 class="hhi-empty-state__title">No pending referrals</h3>
        <p class="hhi-empty-state__subtitle">You're all caught up! New referrals from GPs or other specialists will
          appear here.</p>
      </div>
    </section>

    <!-- Upcoming Appointments Section -->
    <section class="appointments-section">
      <h2 class="section-title">Today's Appointments</h2>
      <div class="appointment-card">
        <div class="appointment-time">10:00 AM</div>
        <div class="appointment-info">
          <span class="appointment-patient">James Wilson</span>
          <span class="appointment-type">Follow-up Consultation</span>
        </div>
        <span class="appointment-status appointment-status--confirmed">Confirmed</span>
      </div>
      <div class="appointment-card">
        <div class="appointment-time">11:30 AM</div>
        <div class="appointment-info">
          <span class="appointment-patient">Maria Garcia</span>
          <span class="appointment-type">Initial Consultation</span>
        </div>
        <span class="appointment-status appointment-status--confirmed">Confirmed</span>
      </div>
      <div class="appointment-card">
        <div class="appointment-time">2:00 PM</div>
        <div class="appointment-info">
          <span class="appointment-patient">Robert Taylor</span>
          <span class="appointment-type">Review Lab Results</span>
        </div>
        <span class="appointment-status appointment-status--pending">Pending</span>
      </div>
    </section>
  </div>

  <!-- Mobile Bottom Navigation -->
  <nav class="hhi-bottom-nav">
    <a class="hhi-bottom-nav__item hhi-bottom-nav__item--active" routerLink="/specialist">
      <svg class="hhi-bottom-nav__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="3" width="7" height="7"></rect>
        <rect x="14" y="3" width="7" height="7"></rect>
        <rect x="14" y="14" width="7" height="7"></rect>
        <rect x="3" y="14" width="7" height="7"></rect>
      </svg>
      <span class="hhi-bottom-nav__label">Dashboard</span>
    </a>
    <button type="button" class="hhi-bottom-nav__item hhi-bottom-nav__item--disabled" disabled aria-disabled="true">
      <svg class="hhi-bottom-nav__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
      <span class="hhi-bottom-nav__label">Patients</span>
      <span class="hhi-bottom-nav__hint">Coming soon</span>
    </button>
    <a class="hhi-bottom-nav__item" routerLink="/specialist">
      <svg class="hhi-bottom-nav__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <path
          d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
        </path>
      </svg>
      <span class="hhi-bottom-nav__label">Consult</span>
    </a>
    <a class="hhi-bottom-nav__item" routerLink="/specialist/profile">
      <svg class="hhi-bottom-nav__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="3"></circle>
        <path
          d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l-.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06-.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
        </path>
      </svg>
      <span class="hhi-bottom-nav__label">Profile</span>
    </a>
  </nav>
</section>